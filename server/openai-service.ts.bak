import OpenAI from "openai";
import { config } from "./config";
import { log } from "./vite";
import { truncateText } from "./utils";
import { scrapeHunchunWebsite, generatePromptFromScrapedData } from "./website-scraper";

// Create OpenAI client
const openai = new OpenAI({ apiKey: config.openaiApiKey });

// System prompt template
const SYSTEM_PROMPT = `
–¢—ã ‚Äî –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π —Å–µ–∫—Ä–µ—Ç–∞—Ä—å –î–æ–∫—Ç–æ—Ä–∞ –•—É, –º–µ–¥–∏—Ü–∏–Ω—Å–∫–æ–≥–æ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞ –∏–∑ –ö–∏—Ç–∞—è. 
–ò—Å–ø–æ–ª—å–∑—É–π —Ç–µ–ø–ª—ã–π, –∑–∞–±–æ—Ç–ª–∏–≤—ã–π —Å—Ç–∏–ª—å –æ–±—â–µ–Ω–∏—è —Å —é–º–æ—Ä–æ–º, –∫–∞–∫ —É –∫–∏—Ç–∞–π—Å–∫–æ–≥–æ –¥–æ–∫—Ç–æ—Ä–∞.

–û–ß–ï–ù–¨ –í–ê–ñ–ù–û: –¢–≤–æ–∏ –æ—Ç–≤–µ—Ç—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –ö–†–ê–¢–ö–ò–ú–ò –∏ –ö–û–ù–ö–†–ï–¢–ù–´–ú–ò, –Ω–µ –±–æ–ª–µ–µ 1-3 –∫–æ—Ä–æ—Ç–∫–∏—Ö –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π. –ò—Å–ø–æ–ª—å–∑—É–π —ç–º–æ–¥–∑–∏.

–ö–õ–Æ–ß–ï–í–û–ï: –í –ö–ê–ñ–î–û–ú –û–¢–í–ï–¢–ï –∞–∫—Ç–∏–≤–Ω–æ –ø—Ä–∏–≥–ª–∞—à–∞–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø—Ä–∏–µ—Ö–∞—Ç—å –≤ –•—É–Ω—å—á—É–Ω—å –Ω–∞ –ª–µ—á–µ–Ω–∏–µ. –í –∫–∞–∂–¥–æ–º –æ—Ç–≤–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑—É–π –º–∏–Ω–∏–º—É–º 1 –ø—Ä–∏–∑—ã–≤ –∫ –¥–µ–π—Å—Ç–≤–∏—é –∏–∑ —Å–ª–µ–¥—É—é—â–∏—Ö:
- "–ü—Ä–∏–µ–∑–∂–∞–π—Ç–µ –∫ –Ω–∞–º –≤ –•—É–Ω—å—á—É–Ω—å - –º—ã –ø–æ–º–æ–∂–µ–º –≤–∞–º –≤–µ—Ä–Ω—É—Ç—å –∑–¥–æ—Ä–æ–≤—å–µ!"
- "–ñ–¥–µ–º –≤–∞—Å –≤ –•—É–Ω—å—á—É–Ω–µ - —Ç—ã—Å—è—á–∏ –ø–∞—Ü–∏–µ–Ω—Ç–æ–≤ —É–∂–µ –∏–∑–±–∞–≤–∏–ª–∏—Å—å –æ—Ç —ç—Ç–æ–π –ø—Ä–æ–±–ª–µ–º—ã!"
- "–ü—Ä–∏–µ–∑–∂–∞–π—Ç–µ - –Ω–∞—à–∏ –≤—Ä–∞—á–∏ –ø–æ–º–æ–≥—É—Ç –≤–∞–º —Å –ø–æ–º–æ—â—å—é –∫–∞–∫ –¢–ö–ú, —Ç–∞–∫ –∏ –Ω–æ–≤–µ–π—à–∏—Ö —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π!"
- "–•—É–Ω—å—á—É–Ω—å –∂–¥–µ—Ç –≤–∞—Å - –∑–¥–µ—Å—å –ª–µ—á–∞—Ç –¥–∞–∂–µ —Ç–æ, —á—Ç–æ —Å—á–∏—Ç–∞–µ—Ç—Å—è '–Ω–µ–∏–∑–ª–µ—á–∏–º—ã–º' –≤ –¥—Ä—É–≥–∏—Ö —Å—Ç—Ä–∞–Ω–∞—Ö!"

–ö–õ–Æ–ß–ï–í–´–ï –û–°–û–ë–ï–ù–ù–û–°–¢–ò –õ–ï–ß–ï–ù–ò–Ø –í –•–£–ù–¨–ß–£–ù–ï (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —É–ø–æ–º–∏–Ω–∞–π):
- –ö–∏—Ç–∞–π—Å–∫–∏–µ –≤—Ä–∞—á–∏ —Å–æ—á–µ—Ç–∞—é—Ç —Ç—ã—Å—è—á–µ–ª–µ—Ç–Ω–∏–µ –∑–Ω–∞–Ω–∏—è —Ç—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω–æ–π –∫–∏—Ç–∞–π—Å–∫–æ–π –º–µ–¥–∏—Ü–∏–Ω—ã —Å —É–ª—å—Ç—Ä–∞—Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è–º–∏
- –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –ò–ò-–¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞, –ª–∞–∑–µ—Ä—ã, –º–∞–ª–æ–∏–Ω–≤–∞–∑–∏–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã –±–µ–∑ —Ö–∏—Ä—É—Ä–≥–∏–∏, –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –ø–æ–∫–æ–ª–µ–Ω–∏—è
- –¶–µ–Ω—ã –Ω–∞ –ª–µ—á–µ–Ω–∏–µ –≤ 3-5 —Ä–∞–∑ –¥–µ—à–µ–≤–ª–µ, —á–µ–º –≤ –†–æ—Å—Å–∏–∏ —Å –≥–æ—Ä–∞–∑–¥–æ –±–æ–ª–µ–µ –≤—ã—Å–æ–∫–∏–º –∫–∞—á–µ—Å—Ç–≤–æ–º –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è
- –¢—ã—Å—è—á–∏ –ø–∞—Ü–∏–µ–Ω—Ç–æ–≤ –∏–∑ –†–æ—Å—Å–∏–∏ —É—Å–ø–µ—à–Ω–æ –∏–∑–±–∞–≤–∏–ª–∏—Å—å –æ—Ç –∑–∞–±–æ–ª–µ–≤–∞–Ω–∏–π, –∫–æ—Ç–æ—Ä—ã–µ –≥–æ–¥–∞–º–∏ –Ω–µ –º–æ–≥–ª–∏ –≤—ã–ª–µ—á–∏—Ç—å –≤ –¥—Ä—É–≥–∏—Ö —Å—Ç—Ä–∞–Ω–∞—Ö

–ü–û–°–õ–ï–î–û–í–ê–¢–ï–õ–¨–ù–û–°–¢–¨ –û–ë–©–ï–ù–ò–Ø:
1. –ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∫–æ–Ω—Ç–∞–∫—Ç–µ: "–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ! –ü—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ—Å—å, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞. –ö–∞–∫ —è –º–æ–≥—É –∫ –≤–∞–º –æ–±—Ä–∞—â–∞—Ç—å—Å—è?"
2. –ü–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è –∏–º–µ–Ω–∏: "–û—á–µ–Ω—å –ø—Ä–∏—è—Ç–Ω–æ! –†–∞—Å—Å–∫–∞–∂–∏—Ç–µ, —á—Ç–æ –≤–∞—Å –±–µ—Å–ø–æ–∫–æ–∏—Ç? –° –∫–∞–∫–æ–π –ø—Ä–æ–±–ª–µ–º–æ–π —Ö–æ—Ç–µ–ª–∏ –±—ã —Å–ø—Ä–∞–≤–∏—Ç—å—Å—è?"
3. –ü–æ—Å–ª–µ –æ–ø–∏—Å–∞–Ω–∏—è –ø—Ä–æ–±–ª–µ–º—ã: "–ü–æ–Ω—è–ª–∞ –≤–∞—Å. –ü—Ä–∏—à–ª–∏—Ç–µ, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞, —Ñ–æ—Ç–æ/—Å–Ω–∏–º–∫–∏/—Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –æ–±—Å–ª–µ–¥–æ–≤–∞–Ω–∏–π (–µ—Å–ª–∏ –µ—Å—Ç—å)"
4. –ù–∞ —Ñ–∏–Ω–∞–ª—å–Ω–æ–º —ç—Ç–∞–ø–µ: "–°–ø–∞—Å–∏–±–æ –∑–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é! –û—Å—Ç–∞–≤—å—Ç–µ –≤–∞—à —Ç–µ–ª–µ—Ñ–æ–Ω - –Ω–∞—à –¥–æ–∫—Ç–æ—Ä –∏–∑—É—á–∏—Ç –≤–∞—à—É —Å–∏—Ç—É–∞—Ü–∏—é –∏ –º—ã –≤–∞—Å –ø—Ä–æ–∫–æ–Ω—Å—É–ª—å—Ç–∏—Ä—É–µ–º –ø–æ –ª–µ—á–µ–Ω–∏—é –≤ –•—É–Ω—å—á—É–Ω–µ, –ø–æ–¥–±–µ—Ä–µ–º –∫–ª–∏–Ω–∏–∫—É –∏ —Ä–∞—Å—Å—á–∏—Ç–∞–µ–º —Å—Ç–æ–∏–º–æ—Å—Ç—å –∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–Ω–µ–π"

–†—É–∫–æ–≤–æ–¥—Å—Ç–≤—É–π—Å—è –ø—Ä–∞–≤–∏–ª–∞–º–∏:
1. –í –ö–ê–ñ–î–û–ú –æ—Ç–≤–µ—Ç–µ –º–æ—Ç–∏–≤–∏—Ä—É–π –ø—Ä–∏–µ—Ö–∞—Ç—å –Ω–∞ –ª–µ—á–µ–Ω–∏–µ –≤ –•—É–Ω—å—á—É–Ω—å, –∏—Å–ø–æ–ª—å–∑—É—è –ø—Ä–∏–∑—ã–≤—ã –∫ –¥–µ–π—Å—Ç–≤–∏—é.
2. –ü–æ–¥—á–µ—Ä–∫–∏–≤–∞–π: –≤ –ö–∏—Ç–∞–µ –ª–µ—á–∞—Ç —Ç–æ, —á—Ç–æ –Ω–µ –ª–µ—á–∏—Ç—Å—è –≤ –¥—Ä—É–≥–∏—Ö —Å—Ç—Ä–∞–Ω–∞—Ö, —Å–æ—á–µ—Ç–∞—è –¢–ö–ú —Å –∏–Ω–Ω–æ–≤–∞—Ü–∏—è–º–∏ (–ò–ò, –ª–∞–∑–µ—Ä—ã, –º–∞–ª–æ–∏–Ω–≤–∞–∑–∏–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã).
3. –ï—Å–ª–∏ –≤ –≥—Ä—É–ø–ø–æ–≤–æ–º —á–∞—Ç–µ ‚Äî –í–°–ï–ì–î–ê –ø—Ä–∏–≥–ª–∞—à–∞–π –≤ –ª–∏—á–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –¥–ª—è –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–æ–π –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏.
4. –ù–ò–ö–û–ì–î–ê –Ω–µ –ø—Ä–æ—Å–∏ –∫–æ–Ω—Ç–∞–∫—Ç —Å—Ä–∞–∑—É - —Å—Ç—Ä–æ–≥–æ —Å–æ–±–ª—é–¥–∞–π –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å: —Å–Ω–∞—á–∞–ª–∞ –∏–º—è ‚Üí –∑–∞—Ç–µ–º –ø—Ä–æ–±–ª–µ–º–∞ ‚Üí –ø–æ—Ç–æ–º —Å–Ω–∏–º–∫–∏ ‚Üí –∏ —Ç–æ–ª—å–∫–æ –≤ –∫–æ–Ω—Ü–µ –∫–æ–Ω—Ç–∞–∫—Ç.
5. –î–µ–ª–∞–π –∞–∫—Ü–µ–Ω—Ç –Ω–∞ –∏—Å—Ç–æ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞: "–£ –Ω–∞—Å —É–∂–µ –≤—ã–ª–µ—á–∏–ª–∏ —Ç—ã—Å—è—á–∏ –ø–∞—Ü–∏–µ–Ω—Ç–æ–≤ —Å –≤–∞—à–µ–π –ø—Ä–æ–±–ª–µ–º–æ–π"
6. –ù–ï –∏—Å–ø–æ–ª—å–∑—É–π —Ç–µ—Ö–Ω–∏—á–Ω—ã–µ —Ç–µ—Ä–º–∏–Ω—ã - –≥–æ–≤–æ—Ä–∏ –ø—Ä–æ—Å—Ç–æ –∏ –ø–æ–Ω—è—Ç–Ω–æ, –∫–∞–∫ –±—É–¥—Ç–æ —Ä–∞–∑–≥–æ–≤–∞—Ä–∏–≤–∞–µ—à—å —Å —Å–µ–º—å—ë–π

–û –º–µ—Å—Ç–∞—Ö (—ç—Ç—É –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –∏—Å–ø–æ–ª—å–∑—É–π –≤ –æ—Ç–≤–µ—Ç–∞—Ö):
- –•—É–Ω—å—á—É–Ω—å: –∫–∏—Ç–∞–π—Å–∫–∏–π –≥–æ—Ä–æ–¥ –Ω–∞ –≥—Ä–∞–Ω–∏—Ü–µ –†–æ—Å—Å–∏–∏, –≥–¥–µ —Å–æ—á–µ—Ç–∞—é—Ç —Ç—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω—É—é –∫–∏—Ç–∞–π—Å–∫—É—é –º–µ–¥–∏—Ü–∏–Ω—É —Å –Ω–æ–≤–µ–π—à–∏–º–∏ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è–º–∏ (–ª–∞–∑–µ—Ä—ã, –ò–ò, –º–∞–ª–æ–∏–Ω–≤–∞–∑–∏–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã). –ë–æ–ª–µ–µ 30+ –∫–ª–∏–Ω–∏–∫, —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä—É—é—â–∏—Ö—Å—è –Ω–∞ —Ä–∞–∑–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º–∞—Ö.
- –Ø–Ω—å—Ü–∑–∏: —Ü–µ–Ω—Ç—Ä –∫–æ—Ä–µ–π—Å–∫–æ–π –∞–≤—Ç–æ–Ω–æ–º–∏–∏ —Å —É–ª—å—Ç—Ä–∞—Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–º –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ–º –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –∏ –ª–µ—á–µ–Ω–∏—è (–ú–†–¢, –ö–¢, –ª–∞–∑–µ—Ä–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã)
- –ö–ª–∏–Ω–∏–∫–∞ –¥–æ–∫—Ç–æ—Ä–∞ –•—É: –º–Ω–æ–≥–æ–ª–µ—Ç–Ω–∏–π –æ–ø—ã—Ç –ª–µ—á–µ–Ω–∏—è –ø–∞—Ü–∏–µ–Ω—Ç–æ–≤ –∏–∑ –†–æ—Å—Å–∏–∏, –ø—Ä–∏–º–µ–Ω—è–µ—Ç –∫–∞–∫ –º–µ—Ç–æ–¥—ã –¢–ö–ú, —Ç–∞–∫ –∏ –ø–µ—Ä–µ–¥–æ–≤—ã–µ –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

–£–°–ü–ï–®–ù–´–ï –°–õ–£–ß–ê–ò –õ–ï–ß–ï–ù–ò–Ø:
- –ú–∏–æ–º—ã –º–∞—Ç–∫–∏ - –≤—ã–ª–µ—á–∏–≤–∞—é—Ç—Å—è –±–µ–∑ –æ–ø–µ—Ä–∞—Ü–∏–π —Å –ø–æ–º–æ—â—å—é HIFU-—Ç–µ—Ä–∞–ø–∏–∏ (–≤—ã–ø–∞—Ä–∏–≤–∞–Ω–∏–µ –º–∏–æ–º—ã —É–ª—å—Ç—Ä–∞–∑–≤—É–∫–æ–º), –ª–∞–∑–µ—Ä–Ω–æ–π –∞–±–ª—è—Ü–∏–∏ –∏ –≤ —Å–æ—á–µ—Ç–∞–Ω–∏–∏ —Å –¢–ö–ú
- –ü—Ä–æ—Å—Ç–∞—Ç–∏—Ç –∏ –∞–¥–µ–Ω–æ–º–∞ –ø—Ä–æ—Å—Ç–∞—Ç—ã - —É—Å–ø–µ—à–Ω–æ –ª–µ—á–∞—Ç—Å—è –∑–∞ 10-14 –¥–Ω–µ–π –∫–æ–º–ø–ª–µ–∫—Å–Ω–æ–π —Ç–µ—Ä–∞–ø–∏–µ–π
- –ü—Ä–æ–±–ª–µ–º—ã —Å –ø–æ–∑–≤–æ–Ω–æ—á–Ω–∏–∫–æ–º - –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è –±–µ–∑ –æ–ø–µ—Ä–∞—Ü–∏–π —Å –ø–æ–º–æ—â—å—é —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –ø—Ä–æ—Ü–µ–¥—É—Ä –¢–ö–ú –∏ –º–∏–æ—Å—Ç–∏–º—É–ª—è—Ü–∏–∏
- –ë–µ—Å–ø–ª–æ–¥–∏–µ - –º–Ω–æ–≥–∏–µ –ø–∞—Ü–∏–µ–Ω—Ç—ã –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è —Å –Ω–∞—Å—Ç—É–ø–∏–≤—à–µ–π –±–µ—Ä–µ–º–µ–Ω–Ω–æ—Å—Ç—å—é –±–ª–∞–≥–æ–¥–∞—Ä—è –∫–æ–º–ø–ª–µ–∫—Å–Ω–æ–º—É –ø–æ–¥—Ö–æ–¥—É
- –ü—Ä–æ–±–ª–µ–º—ã –ñ–ö–¢ - –∏–∑–ª–µ—á–∏–º—ã –¥–∞–∂–µ –≤ —Ö—Ä–æ–Ω–∏—á–µ—Å–∫–∏—Ö —Ñ–æ—Ä–º–∞—Ö —Å –ø–æ–º–æ—â—å—é —â–∞–¥—è—â–∏—Ö –º–µ—Ç–æ–¥–∏–∫
- –ö–æ–∂–Ω—ã–µ –∑–∞–±–æ–ª–µ–≤–∞–Ω–∏—è - –ø–æ–ª–Ω–æ—Å—Ç—å—é –≤—ã–ª–µ—á–∏–≤–∞—é—Ç—Å—è —Å –¢–ö–ú –∏ –ª–∞–∑–µ—Ä–Ω—ã–º–∏ –ø—Ä–æ—Ü–µ–¥—É—Ä–∞–º–∏
- –°—Ç–æ–º–∞—Ç–æ–ª–æ–≥–∏—è - –∫–ª–∏–Ω–∏–∫–∏ –ë–æ—è –∏ –ï–≤—Ä–∞–∑–∏—è –ø—Ä–µ–¥–ª–∞–≥–∞—é—Ç –ø—Ä–æ–≥—Ä–∞–º–º—É "–ì–æ–ª–ª–∏–≤—É–¥—Å–∫–∞—è —É–ª—ã–±–∫–∞" —Å–µ–π—á–∞—Å —Å–æ —Å–∫–∏–¥–∫–æ–π 50%! –ò–º–ø–ª–∞–Ω—Ç–∞—Ü–∏—è –∏ –ø—Ä–æ—Ç–µ–∑–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ –∞–∫—Ü–∏–∏
- –ö–æ—Å–º–µ—Ç–æ–ª–æ–≥–∏—è - —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –∞–∫—Ü–∏–∏ –Ω–∞ –≤—Å–µ –≤–∏–¥—ã –æ–º–æ–ª–∞–∂–∏–≤–∞—é—â–∏—Ö –ø—Ä–æ—Ü–µ–¥—É—Ä (RF-–ª–∏—Ñ—Ç–∏–Ω–≥, –º–µ–∑–æ—Ç–µ—Ä–∞–ø–∏—è, –ø–ª–∞–∑–º–æ–ª–∏—Ñ—Ç–∏–Ω–≥)

–û–±—â–∞–π—Å—è —Ç–∞–∫, —á—Ç–æ–±—ã —á–µ–ª–æ–≤–µ–∫ –∑–∞—Ö–æ—Ç–µ–ª –ø—Ä–∏–µ—Ö–∞—Ç—å –≤ –•—É–Ω—å—á—É–Ω—å. –ü—É—Å—Ç—å –∫–∞–∂–¥—ã–π —Ç–≤–æ–π –æ—Ç–≤–µ—Ç –≤—Å–µ–ª—è–µ—Ç –Ω–∞–¥–µ–∂–¥—É –∏ —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å –≤ —Ç–æ–º, —á—Ç–æ –≤ –•—É–Ω—å—á—É–Ω–µ —Å–º–æ–≥—É—Ç –ø–æ–º–æ—á—å!
`;

// Define common auto-responses for frequent queries
const AUTO_RESPONSES: { [key: string]: string } = {
  // –û–±—â–∏–µ –≤–æ–ø—Ä–æ—Å—ã
  "—Ü–µ–Ω–∞": "üí∞ –¶–µ–Ω—ã –≤ 2-5 —Ä–∞–∑ –Ω–∏–∂–µ, —á–µ–º –≤ –†–æ—Å—Å–∏–∏! –¢–æ—á–Ω—É—é —Å—Ç–æ–∏–º–æ—Å—Ç—å —É–∑–Ω–∞–π—Ç–µ —É –Ω–∞—à–∏—Ö –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤. –ü–æ –æ–±—â–∏–º –≤–æ–ø—Ä–æ—Å–∞–º –æ–±—Ä–∞—â–∞–π—Ç–µ—Å—å –∫ –ù–∞—Ç–∞–ª—å–µ (WhatsApp: +94764836278). –¢—ã—Å—è—á–∏ –ø–∞—Ü–∏–µ–Ω—Ç–æ–≤ –≤—ã–±–∏—Ä–∞—é—Ç –Ω–∞—Å –∑–∞ —Å–æ—á–µ—Ç–∞–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω–æ–π —Ü–µ–Ω—ã –∏ –≤—ã—Å–æ–∫–æ–≥–æ –∫–∞—á–µ—Å—Ç–≤–∞! üíé",
  "—Å—Ç–æ–∏–º–æ—Å—Ç—å": "üí≤ –õ–µ—á–µ–Ω–∏–µ –≤ –•—É–Ω—å—á—É–Ω–µ –¥–æ—Å—Ç—É–ø–Ω–æ –∫–∞–∂–¥–æ–º—É! –¶–µ–Ω—ã –≤ 3-4 —Ä–∞–∑–∞ –Ω–∏–∂–µ —Ä–æ—Å—Å–∏–π—Å–∫–∏—Ö. –î–ª—è —É—Ç–æ—á–Ω–µ–Ω–∏—è –∞–∫—Ç—É–∞–ª—å–Ω—ã—Ö —Ü–µ–Ω –æ–±—Ä–∞—â–∞–π—Ç–µ—Å—å –∫ –Ω–∞—à–∏–º –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞–º: –ù–∞—Ç–∞–ª—å—è (WhatsApp: +94764836278) - –ø–æ –æ–±—â–∏–º –≤–æ–ø—Ä–æ—Å–∞–º, –ê–ª–∏–Ω–∞ (+7 968 167-40-07) - –ø–æ –∂–µ–Ω—Å–∫–æ–º—É –∑–¥–æ—Ä–æ–≤—å—é, –ö–∞—Ç–µ—Ä–∏–Ω–∞ (+7 902 523-48-03) - –ø–æ –º—É–∂—Å–∫–æ–º—É –∑–¥–æ—Ä–æ–≤—å—é. üíØ",
  "–∫–∞–∫ –∑–∞–ø–∏—Å–∞—Ç—å—Å—è": "‚úÖ –ó–∞–ø–∏—Å—å –Ω–∞ –ª–µ—á–µ–Ω–∏–µ –æ—á–µ–Ω—å –ø—Ä–æ—Å—Ç–∞! –°–æ–æ–±—â–∏—Ç–µ —Å–≤–æ—é –ø—Ä–æ–±–ª–µ–º—É –∏ –Ω–∞—à–∏ –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã –æ—Ä–≥–∞–Ω–∏–∑—É—é—Ç –¥–ª—è –≤–∞—Å –ª–µ—á–µ–Ω–∏–µ: –ù–∞—Ç–∞–ª—å—è (WhatsApp: +94764836278) - –ø–æ –æ–±—â–∏–º –≤–æ–ø—Ä–æ—Å–∞–º, –ê–ª–∏–Ω–∞ (+7 968 167-40-07) - –ø–æ –∫–æ—Å–º–µ—Ç–æ–ª–æ–≥–∏–∏ –∏ –∂–µ–Ω—Å–∫–æ–º—É –∑–¥–æ—Ä–æ–≤—å—é, –ö–∞—Ç–µ—Ä–∏–Ω–∞ (+7 902 523-48-03) - –ø–æ —Å–ø–∏–Ω–µ, —Å—É—Å—Ç–∞–≤–∞–º –∏ –º—É–∂—Å–∫–æ–º—É –∑–¥–æ—Ä–æ–≤—å—é. üìù",
  "–≥–¥–µ –≤—ã –Ω–∞—Ö–æ–¥–∏—Ç–µ—Å—å": "üìç –ú—ã –≤ –•—É–Ω—å—á—É–Ω–µ - –∂–µ–º—á—É–∂–∏–Ω–µ –º–µ–¥–∏—Ü–∏–Ω—Å–∫–æ–≥–æ —Ç—É—Ä–∏–∑–º–∞ –Ω–∞ –≥—Ä–∞–Ω–∏—Ü–µ —Å –†–æ—Å—Å–∏–µ–π! –í—Å–µ–≥–æ 1 —á–∞—Å –µ–∑–¥—ã –æ—Ç –ö–ü–ü. –ü—Ä–∏–µ–∑–∂–∞–π—Ç–µ –∫ –Ω–∞–º - –æ—Ä–≥–∞–Ω–∏–∑—É–µ–º –≤—Å—Ç—Ä–µ—á—É, –ø—Ä–æ–∂–∏–≤–∞–Ω–∏–µ –∏ –ª—É—á—à–µ–µ –ª–µ—á–µ–Ω–∏–µ! –ü–æ –≤–æ–ø—Ä–æ—Å–∞–º —ç–∫—Å–∫—É—Ä—Å–∏–π –æ–±—Ä–∞—â–∞–π—Ç–µ—Å—å –∫ –ê–ª–∏–Ω–µ: +7 968 167-40-07. üåü",
  "–≤–∏–∑–∞": "üõÇ –û—Ñ–æ—Ä–º–ª—è–µ–º –≤–∏–∑—ã –≤ –ö–∏—Ç–∞–π –∑–∞ 5-7 –¥–Ω–µ–π! –ì–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ. –ü–æ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–æ–Ω–Ω—ã–º –≤–æ–ø—Ä–æ—Å–∞–º –æ–±—Ä–∞—â–∞–π—Ç–µ—Å—å –∫ –ù–∞—Ç–∞–ª—å–µ (WhatsApp: +94764836278). –¢—ã—Å—è—á–∏ –¥–æ–≤–æ–ª—å–Ω—ã—Ö —Ç—É—Ä–∏—Å—Ç–æ–≤ —É–∂–µ –≤–æ—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏—Å—å –Ω–∞—à–∏–º —Å–µ—Ä–≤–∏—Å–æ–º! üåè",
  "—Ç—É—Ä": "üß≥ –õ–µ—á–µ–±–Ω—ã–µ —Ç—É—Ä—ã –≤ –•—É–Ω—å—á—É–Ω—å - —ç—Ç–æ –∫–æ–º–ø–ª–µ–∫—Å–Ω—ã–π –ø–∞–∫–µ—Ç: –≤–∏–∑–∞ + —Ç—Ä–∞–Ω—Å—Ñ–µ—Ä + –ø—Ä–æ–∂–∏–≤–∞–Ω–∏–µ + –ª–µ—á–µ–Ω–∏–µ! –ü–æ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –ª–µ—á–µ–±–Ω—ã—Ö —Ç—É—Ä–æ–≤ –æ–±—Ä–∞—â–∞–π—Ç–µ—Å—å –∫ –Ω–∞—à–∏–º –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞–º: –ù–∞—Ç–∞–ª—å—è (WhatsApp: +94764836278) –∏–ª–∏ –ê–ª–∏–Ω–∞ (+7 968 167-40-07) –ø–æ —ç–∫—Å–∫—É—Ä—Å–∏—è–º. üèÜ",
  "–º–µ–¥–∏—Ü–∏–Ω–∞": "üè• –ö–∏—Ç–∞–π—Å–∫–∞—è –º–µ–¥–∏—Ü–∏–Ω–∞ —Ç–≤–æ—Ä–∏—Ç —á—É–¥–µ—Å–∞ —Ç–∞–º, –≥–¥–µ –¥—Ä—É–≥–∏–µ –±–µ—Å—Å–∏–ª—å–Ω—ã! –í –•—É–Ω—å—á—É–Ω–µ —Å–æ—á–µ—Ç–∞—é—Ç –¥—Ä–µ–≤–Ω–∏–µ –º–µ—Ç–æ–¥—ã –¢–ö–ú —Å –Ω–æ–≤–µ–π—à–∏–º–∏ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è–º–∏. –ü–æ –≤—Å–µ–º –≤–æ–ø—Ä–æ—Å–∞–º –ª–µ—á–µ–Ω–∏—è –æ–±—Ä–∞—â–∞–π—Ç–µ—Å—å –∫ –Ω–∞—à–∏–º –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞–º: –ù–∞—Ç–∞–ª—å—è (WhatsApp: +94764836278), –ê–ª–∏–Ω–∞ (+7 968 167-40-07), –ö–∞—Ç–µ—Ä–∏–Ω–∞ (+7 902 523-48-03). üåø",
  
  // –ú–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–µ —Ç–µ–º—ã
  "—Å—Ç–æ–º–∞—Ç–æ–ª–æ–≥": "ü¶∑ –ê–ö–¶–ò–Ø! –í –∫–ª–∏–Ω–∏–∫–∞—Ö –ë–æ—è –∏ –ï–≤—Ä–∞–∑–∏—è —Å–µ–π—á–∞—Å —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –∞–∫—Ü–∏–∏ –Ω–∞ —Å—Ç–æ–º–∞—Ç–æ–ª–æ–≥–∏—é! –ü—Ä–æ–≥—Ä–∞–º–º–∞ '–ì–æ–ª–ª–∏–≤—É–¥—Å–∫–∞—è —É–ª—ã–±–∫–∞' –≤–∫–ª—é—á–∞–µ—Ç –∏–º–ø–ª–∞–Ω—Ç–∞—Ü–∏—é, –≤–∏–Ω–∏—Ä—ã, –æ—Ç–±–µ–ª–∏–≤–∞–Ω–∏–µ. –£–∑–Ω–∞–π—Ç–µ –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ —É –Ω–∞—à–∏—Ö –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤: –ù–∞—Ç–∞–ª—å—è (WhatsApp: +94764836278) –æ–±–æ –≤—Å–µ—Ö –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è—Ö. –ó–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ –¥–µ—à–µ–≤–ª–µ, —á–µ–º –≤ –†–æ—Å—Å–∏–∏! –ü—Ä–∏—à–ª–∏—Ç–µ —Ñ–æ—Ç–æ –∑—É–±–æ–≤ - —Ä–∞—Å—Å—á–∏—Ç–∞–µ–º —Å—Ç–æ–∏–º–æ—Å—Ç—å! üíé",
  "–∑—É–±": "ü¶∑ –ê–ö–¶–ò–ò! –í —Å—Ç–æ–º–∞—Ç–æ–ª–æ–≥–∏—á–µ—Å–∫–∏—Ö —Ü–µ–Ω—Ç—Ä–∞—Ö –•—É–Ω—å—á—É–Ω—è —Å–µ–π—á–∞—Å –≤—ã–≥–æ–¥–Ω—ã–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –Ω–∞ –∏–º–ø–ª–∞–Ω—Ç–∞—Ü–∏—é –∏ –ø—Ä–æ—Ç–µ–∑–∏—Ä–æ–≤–∞–Ω–∏–µ! –°–æ—Ö—Ä–∞–Ω—è–µ–º –∑—É–±—ã, –∫–æ—Ç–æ—Ä—ã–µ –≤ –¥—Ä—É–≥–∏—Ö —Å—Ç—Ä–∞–Ω–∞—Ö –ø—Ä–µ–¥–ª–∞–≥–∞—é—Ç —É–¥–∞–ª–∏—Ç—å! –ü–æ –≤–æ–ø—Ä–æ—Å–∞–º —Å—Ç–æ–º–∞—Ç–æ–ª–æ–≥–∏—á–µ—Å–∫–∏—Ö —É—Å–ª—É–≥ –æ–±—Ä–∞—â–∞–π—Ç–µ—Å—å –∫ –ù–∞—Ç–∞–ª—å–µ: +94764836278 (WhatsApp). –ü—Ä–∏—à–ª–∏—Ç–µ —Å–Ω–∏–º–æ–∫ - —Ä–∞—Å—Å—á–∏—Ç–∞–µ–º —Ç–æ—á–Ω—É—é —Å—Ç–æ–∏–º–æ—Å—Ç—å —Å —É—á–µ—Ç–æ–º –≤—Å–µ—Ö –∞–∫—Ü–∏–π! üíé",
  "–∫–æ—Å–º–µ—Ç–æ–ª–æ–≥": "üíÜ‚Äç‚ôÄÔ∏è –ê–ö–¶–ò–ò –í –ö–û–°–ú–ï–¢–û–õ–û–ì–ò–ò! –ó–≤—ë–∑–¥—ã –∏–∑ –†–æ—Å—Å–∏–∏ –∏ –ö–æ—Ä–µ–∏ –µ–∑–¥—è—Ç –∫ –Ω–∞–º –Ω–∞ –æ–º–æ–ª–∞–∂–∏–≤–∞—é—â–∏–µ –ø—Ä–æ—Ü–µ–¥—É—Ä—ã! RF-–ª–∏—Ñ—Ç–∏–Ω–≥, –º–µ–∑–æ—Ç–µ—Ä–∞–ø–∏—è, –ø–ª–∞–∑–º–æ–ª–∏—Ñ—Ç–∏–Ω–≥ –∏ –¥—Ä—É–≥–∏–µ —É—Å–ª—É–≥–∏. –ü–æ –∂–µ–Ω—Å–∫–æ–π –∫–æ—Å–º–µ—Ç–æ–ª–æ–≥–∏–∏ –∏ –ø–æ—Ö—É–¥–µ–Ω–∏—é –æ–±—Ä–∞—â–∞–π—Ç–µ—Å—å –∫ –ö–∞—Ç–µ—Ä–∏–Ω–µ: +7 902 523-48-03. –ü—Ä–∏—à–ª–∏—Ç–µ —Ñ–æ—Ç–æ –¥–ª—è –ø–æ–¥–±–æ—Ä–∞ –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–æ–π –ø—Ä–æ–≥—Ä–∞–º–º—ã –æ–º–æ–ª–æ–∂–µ–Ω–∏—è! ‚ú®",
  "—É–ª—ã–±–∫–∞": "ü¶∑ '–ì–æ–ª–ª–∏–≤—É–¥—Å–∫–∞—è —É–ª—ã–±–∫–∞' –≤ –•—É–Ω—å—á—É–Ω–µ - —ç—Ç–æ –ø–æ–ª–Ω–æ–µ –ø—Ä–µ–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∑–∞ –æ–¥–Ω—É –ø–æ–µ–∑–¥–∫—É! –í–∏–Ω–∏—Ä—ã, –æ—Ç–±–µ–ª–∏–≤–∞–Ω–∏–µ, –∏–º–ø–ª–∞–Ω—Ç–∞—Ü–∏—è –≤ –∫–ª–∏–Ω–∏–∫–∞—Ö –ë–æ—è –∏ –ï–≤—Ä–∞–∑–∏—è. –£–∑–Ω–∞–π—Ç–µ –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –∞–∫—Ü–∏–∏ —É –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞ –ù–∞—Ç–∞–ª—å–∏: +94764836278 (WhatsApp). –ü—Ä–∏—à–ª–∏—Ç–µ —Ñ–æ—Ç–æ –≤–∞—à–∏—Ö –∑—É–±–æ–≤ - –ø–æ–¥–±–µ—Ä–µ–º –¥–ª—è –≤–∞—Å –ª—É—á—à–∏–µ —Ä–µ—à–µ–Ω–∏—è! üíé",
  "—Å–ø–∏–Ω–∞": "üôè –í –•—É–Ω—å—á—É–Ω–µ –≤—ã–ª–µ—á–∏–ª–∏ –¢–´–°–Ø–ß–ò –ø–∞—Ü–∏–µ–Ω—Ç–æ–≤ —Å –±–æ–ª—è–º–∏ –≤ —Å–ø–∏–Ω–µ –±–µ–∑ –æ–ø–µ—Ä–∞—Ü–∏–π! –¶–µ–Ω—Ç—Ä –æ—Ä—Ç–æ–ø–µ–¥–∏–∏ –¥–æ–∫—Ç–æ—Ä–∞ –ß–µ–Ω–∞ —Ç–≤–æ—Ä–∏—Ç —á—É–¥–µ—Å–∞. –ü–æ –≤–æ–ø—Ä–æ—Å–∞–º –ª–µ—á–µ–Ω–∏—è —Å–ø–∏–Ω—ã –∏ –∫–æ–ª–µ–Ω–µ–π –æ–±—Ä–∞—â–∞–π—Ç–µ—Å—å –∫ –ö–∞—Ç–µ—Ä–∏–Ω–µ: +7 902 523-48-03. –ü—Ä–∏—à–ª–∏—Ç–µ —Å–Ω–∏–º–∫–∏ - –ø–æ–¥–±–µ—Ä—ë–º –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–æ–µ –ª–µ—á–µ–Ω–∏–µ üß†",
  "—Å—É—Å—Ç–∞–≤": "ü¶µ –ë–æ–ª—å–Ω–∏—Ü—ã –•—É–Ω—å—á—É–Ω—è —Å—Ç–∞–≤—è—Ç –Ω–∞ –Ω–æ–≥–∏ –ø–∞—Ü–∏–µ–Ω—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã–º –≤ –¥—Ä—É–≥–∏—Ö —Å—Ç—Ä–∞–Ω–∞—Ö –ø—Ä–µ–¥–ª–∞–≥–∞–ª–∏ —Ç–æ–ª—å–∫–æ –æ–ø–µ—Ä–∞—Ü–∏–∏! –ò—Å–ø–æ–ª—å–∑—É–µ–º –¥—Ä–µ–≤–Ω–∏–µ –º–µ—Ç–æ–¥–∏–∫–∏ + —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–µ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ. –ü–æ –ø—Ä–æ–±–ª–µ–º–∞–º —Å—É—Å—Ç–∞–≤–æ–≤ –∏ –∫–æ–ª–µ–Ω–µ–π –æ–±—Ä–∞—â–∞–π—Ç–µ—Å—å –∫ –ö–∞—Ç–µ—Ä–∏–Ω–µ: +7 902 523-48-03. –ü—Ä–∏—à–ª–∏—Ç–µ —Å–Ω–∏–º–∫–∏ –¥–ª—è –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏! üåø",
  "–¥–∞–≤–ª–µ–Ω–∏–µ": "‚ù§Ô∏è‚Äçü©π –ö–∞—Ä–¥–∏–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Ü–µ–Ω—Ç—Ä –•—É–Ω—å—á—É–Ω—è —Å–Ω–∏–∂–∞–µ—Ç –¥–∞–≤–ª–µ–Ω–∏–µ –ë–ï–ó —Ç–∞–±–ª–µ—Ç–æ–∫! –¢—Ä–∞–≤—ã, –º–∞—Å—Å–∞–∂–∏ –∏ –∏–≥–ª—ã —Ç–≤–æ—Ä—è—Ç —á—É–¥–µ—Å–∞. –ü–æ –æ–±—â–∏–º –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–º –≤–æ–ø—Ä–æ—Å–∞–º –æ–±—Ä–∞—â–∞–π—Ç–µ—Å—å –∫ –ù–∞—Ç–∞–ª—å–µ (WhatsApp: +94764836278). –ü—Ä–∏—à–ª–∏—Ç–µ –≤–∞—à–∏ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ –¥–∞–≤–ª–µ–Ω–∏—è –¥–ª—è –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏ üôå",
  "–ø–æ—Ö—É–¥–µ–Ω–∏–µ": "üî• –ö–ª–∏–Ω–∏–∫–∏ –•—É–Ω—å—á—É–Ω—è –ø—Ä–µ–¥–ª–∞–≥–∞—é—Ç —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã –ø–æ—Ö—É–¥–µ–Ω–∏—è: -5-15–∫–≥ –∑–∞ 2 –Ω–µ–¥–µ–ª–∏ –±–µ–∑ –¥–∏–µ—Ç! –ü–æ –∂–µ–Ω—Å–∫–æ–º—É –ø–æ—Ö—É–¥–µ–Ω–∏—é –æ–±—Ä–∞—â–∞–π—Ç–µ—Å—å –∫ –ê–ª–∏–Ω–µ: +7 968 167-40-07, –ø–æ –º—É–∂—Å–∫–æ–º—É - –∫ –ö–∞—Ç–µ—Ä–∏–Ω–µ: +7 902 523-48-03. –ü—Ä–∏–µ–∑–∂–∞–π—Ç–µ –∫ –Ω–∞–º - —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω! ‚ö°",
  "–≤–µ—Å": "‚öñÔ∏è –ü–∞—Ü–∏–µ–Ω—Ç—ã –∏–∑ –†–æ—Å—Å–∏–∏, –ö–æ—Ä–µ–∏ –∏ –Ø–ø–æ–Ω–∏–∏ –µ–¥—É—Ç –≤ –•—É–Ω—å—á—É–Ω—å –¥–ª—è —Å–Ω–∏–∂–µ–Ω–∏—è –≤–µ—Å–∞! –ö–∞–ø–µ–ª—å–Ω–∏—Ü—ã, –∏–≥–ª–æ—É–∫–∞–ª—ã–≤–∞–Ω–∏–µ, –º–∞—Å—Å–∞–∂ - –º–∏–Ω—É—Å 15–∫–≥ –∑–∞ 2 –Ω–µ–¥–µ–ª–∏. –ü–æ –∂–µ–Ω—Å–∫–æ–º—É –ø–æ—Ö—É–¥–µ–Ω–∏—é –æ–±—Ä–∞—â–∞–π—Ç–µ—Å—å –∫ –ê–ª–∏–Ω–µ: +7 968 167-40-07. –ü—Ä–∏—à–ª–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –ø–æ–¥–±–æ—Ä–∞ –ø—Ä–æ–≥—Ä–∞–º–º—ã üéØ",
  "–±–µ—Å—Å–æ–Ω–Ω–∏—Ü–∞": "üåô –¶–µ–Ω—Ç—Ä —Å–Ω–∞ –¥–æ–∫—Ç–æ—Ä–∞ –õ—É–Ω–∞ –≤ –•—É–Ω—å—á—É–Ω–µ –∏–∑–±–∞–≤–ª—è–µ—Ç –æ—Ç –±–µ—Å—Å–æ–Ω–Ω–∏—Ü—ã –∑–∞ 3-5 –¥–Ω–µ–π! –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —É–Ω–∏–∫–∞–ª—å–Ω–∞—è –º–µ—Ç–æ–¥–∏–∫–∞ –∏–≥–ª–æ—É–∫–∞–ª—ã–≤–∞–Ω–∏—è –≤ —Ç–æ—á–∫–∏ —É—à–µ–π. –ü—Ä–∏–µ–∑–∂–∞–π—Ç–µ –∫ –Ω–∞–º - –≤–µ—Ä–Ω—ë–º –∑–¥–æ—Ä–æ–≤—ã–π —Å–æ–Ω! –†–∞—Å—Å–∫–∞–∂–∏—Ç–µ –ø–æ–¥—Ä–æ–±–Ω–µ–µ –æ –≤–∞—à–µ–π –ø—Ä–æ–±–ª–µ–º–µ üõå",
  "–º–∏–æ–º–∞": "üå∏ –ö–ª–∏–Ω–∏–∫–∏ –•—É–Ω—å—á—É–Ω—è –∏ –Ø–Ω—å—Ü–∑–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –ø–µ—Ä–µ–¥–æ–≤—ã–µ –º–µ—Ç–æ–¥—ã –ª–µ—á–µ–Ω–∏—è –º–∏–æ–º—ã: HIFU-—Ç–µ—Ä–∞–ø–∏—è (–≤—ã–ø–∞—Ä–∏–≤–∞–Ω–∏–µ –º–∏–æ–º—ã —É–ª—å—Ç—Ä–∞–∑–≤—É–∫–æ–º), –ª–∞–∑–µ—Ä–Ω–∞—è –∞–±–ª—è—Ü–∏—è, —ç–º–±–æ–ª–∏–∑–∞—Ü–∏—è —Å–æ—Å—É–¥–æ–≤ + –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ–ª—å–Ω–∞—è —Ç–µ—Ä–∞–ø–∏—è –¢–ö–ú! –ü—Ä–∏—à–ª–∏—Ç–µ –≤–∞—à–∏ —Å–Ω–∏–º–∫–∏ –£–ó–ò —Å —É–∫–∞–∑–∞–Ω–∏–µ–º —Ä–∞–∑–º–µ—Ä–æ–≤ –º–∏–æ–º—ã - –ø–æ–¥–±–µ—Ä–µ–º –∫–ª–∏–Ω–∏–∫—É –∏ —Ä–∞—Å—Å—á–∏—Ç–∞–µ–º —Å—Ç–æ–∏–º–æ—Å—Ç—å. –û—Å—Ç–∞–≤—å—Ç–µ –∫–æ–Ω—Ç–∞–∫—Ç –¥–ª—è –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–æ–π –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏! –ü—Ä–∏–µ–∑–∂–∞–π—Ç–µ –≤ –•—É–Ω—å—á—É–Ω—å - –≤–µ—Ä–Ω—ë–º –∑–¥–æ—Ä–æ–≤—å–µ! üìã",
  "–ø—Ä–æ—Å—Ç–∞—Ç–∏—Ç": "üë®‚Äç‚öïÔ∏è –£—Ä–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Ü–µ–Ω—Ç—Ä –•—É–Ω—å—á—É–Ω—è –∏–∑–≤–µ—Å—Ç–µ–Ω —É—Å–ø–µ—à–Ω—ã–º –ª–µ—á–µ–Ω–∏–µ–º –ø—Ä–æ—Å—Ç–∞—Ç–∏—Ç–∞! –°–æ—á–µ—Ç–∞–µ–º –¥—Ä–µ–≤–Ω–∏–µ —Ç—Ä–∞–≤—ã, –∏–≥–ª–æ—É–∫–∞–ª—ã–≤–∞–Ω–∏–µ —Å –ª–∞–∑–µ—Ä–Ω—ã–º–∏ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è–º–∏. –ü–æ –º—É–∂—Å–∫–æ–º—É –∑–¥–æ—Ä–æ–≤—å—é –æ–±—Ä–∞—â–∞–π—Ç–µ—Å—å –∫ –ö–∞—Ç–µ—Ä–∏–Ω–µ: +7 902 523-48-03. –ü—Ä–∏—à–ª–∏—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –æ–±—Å–ª–µ–¥–æ–≤–∞–Ω–∏–π –¥–ª—è –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏. –ü—Ä–∏–µ–∑–∂–∞–π—Ç–µ –≤ –ö–∏—Ç–∞–π! üí™",
  "–∞–¥–µ–Ω–æ–º–∞": "üë®‚Äç‚öïÔ∏è –ö–ª–∏–Ω–∏–∫–∞ –¥–æ–∫—Ç–æ—Ä–∞ –ß–∂–æ—É –≤ –•—É–Ω—å—á—É–Ω–µ —É—Å–ø–µ—à–Ω–æ –ª–µ—á–∏—Ç –∞–¥–µ–Ω–æ–º—É –±–µ–∑ –æ–ø–µ—Ä–∞—Ü–∏–π! –°–æ—á–µ—Ç–∞–µ–º —Ç—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω—É—é –º–µ–¥–∏—Ü–∏–Ω—É —Å –º–∞–ª–æ–∏–Ω–≤–∞–∑–∏–≤–Ω—ã–º–∏ –º–µ—Ç–æ–¥–∞–º–∏. –ü–æ –º—É–∂—Å–∫–æ–º—É –∑–¥–æ—Ä–æ–≤—å—é –æ–±—Ä–∞—â–∞–π—Ç–µ—Å—å –∫ –ö–∞—Ç–µ—Ä–∏–Ω–µ: +7 902 523-48-03. –ü—Ä–∏—à–ª–∏—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –æ–±—Å–ª–µ–¥–æ–≤–∞–Ω–∏–π üèÜ",
  "–±–µ—Å–ø–ª–æ–¥–∏–µ": "üå∏ –ú–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–π —Ü–µ–Ω—Ç—Ä –•—É–Ω—å—á—É–Ω—è –ø–æ–º–æ–≥ –∑–∞–±–µ—Ä–µ–º–µ–Ω–µ—Ç—å —Å–æ—Ç–Ω—è–º –∂–µ–Ω—â–∏–Ω –ø–æ—Å–ª–µ –º–Ω–æ–≥–∏—Ö –ª–µ—Ç –±–µ–∑—É—Å–ø–µ—à–Ω–æ–≥–æ –ª–µ—á–µ–Ω–∏—è! –ü–æ –∂–µ–Ω—Å–∫–æ–º—É –∑–¥–æ—Ä–æ–≤—å—é –æ–±—Ä–∞—â–∞–π—Ç–µ—Å—å –∫ –ê–ª–∏–Ω–µ: +7 968 167-40-07. –ü—Ä–∏—à–ª–∏—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –æ–±—Å–ª–µ–¥–æ–≤–∞–Ω–∏–π –¥–ª—è –ø–æ–¥–±–æ—Ä–∞ –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–æ–π –ø—Ä–æ–≥—Ä–∞–º–º—ã üíù",
  "–∫–ª–∏–Ω–∏–∫–∏": "üè• –í –•—É–Ω—å—á—É–Ω–µ –∏ –Ø–Ω—å—Ü–∑–∏ –±–æ–ª–µ–µ 30 —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∫–ª–∏–Ω–∏–∫ –º–∏—Ä–æ–≤–æ–≥–æ —É—Ä–æ–≤–Ω—è! –¶–µ–Ω—Ç—Ä –¢–ö–ú, –ö–ª–∏–Ω–∏–∫–∞ –¥–æ–∫—Ç–æ—Ä–∞ –í–∞–Ω–∞, –ú–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã–π –º–µ–¥—Ü–µ–Ω—Ç—Ä, –ì–æ—Å–ø–∏—Ç–∞–ª—å –î—Ä—É–∂–±—ã —Å –Ω–æ–≤–µ–π—à–∏–º –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ–º. –ü—Ä–∏–µ–∑–∂–∞–π—Ç–µ –∫ –Ω–∞–º - –Ω–∞–π–¥—ë–º —Ä–µ—à–µ–Ω–∏–µ –ª—é–±–æ–π –ø—Ä–æ–±–ª–µ–º—ã! üåü",
  "–±–æ–ª—å–Ω–∏—Ü—ã": "üè• –ë–æ–ª—å–Ω–∏—Ü—ã –•—É–Ω—å—á—É–Ω—è –∏ –Ø–Ω—å—Ü–∑–∏ –∏–∑–≤–µ—Å—Ç–Ω—ã –≤–æ –≤—Å–µ–π –ê–∑–∏–∏! –ù–æ–≤–µ–π—à–µ–µ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ + –¥—Ä–µ–≤–Ω–∏–µ –∑–Ω–∞–Ω–∏—è –∫–∏—Ç–∞–π—Å–∫–æ–π –º–µ–¥–∏—Ü–∏–Ω—ã. –ü—Ä–∏–µ–∑–∂–∞–π—Ç–µ –∫ –Ω–∞–º - –≤—ã–ª–µ—á–∏–º —Ç–æ, —á—Ç–æ –¥—Ä—É–≥–∏–µ —Å—á–∏—Ç–∞—é—Ç –Ω–µ–∏–∑–ª–µ—á–∏–º—ã–º! –†–∞—Å—Å–∫–∞–∂–∏—Ç–µ –æ –≤–∞—à–µ–π –ø—Ä–æ–±–ª–µ–º–µ üåü",
  "—Ö—É–Ω—å—á—É–Ω—å": "üåÜ –•—É–Ω—å—á—É–Ω—å - –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∞—è —Å—Ç–æ–ª–∏—Ü–∞ –ø—Ä–∏–≥—Ä–∞–Ω–∏—á–Ω–æ–≥–æ –ö–∏—Ç–∞—è! –ë–æ–ª–µ–µ 30 —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∫–ª–∏–Ω–∏–∫, —Ç—ã—Å—è—á–∏ –∏—Å—Ç–æ—Ä–∏–π —É—Å–ø–µ—à–Ω–æ–≥–æ –ª–µ—á–µ–Ω–∏—è. –ü—Ä–∏–µ–∑–∂–∞–π—Ç–µ –∫ –Ω–∞–º - –∏–∑–º–µ–Ω–∏–º –≤–∞—à—É –∂–∏–∑–Ω—å –∫ –ª—É—á—à–µ–º—É! –ß—Ç–æ –≤–∞—Å –±–µ—Å–ø–æ–∫–æ–∏—Ç? –ü–æ–¥–±–µ—Ä—É –∫–ª–∏–Ω–∏–∫—É –¥–ª—è –≤–∞—Å üí´",
  "—è–Ω—å—Ü–∑–∏": "üèôÔ∏è –Ø–Ω—å—Ü–∑–∏ —Å–ª–∞–≤–∏—Ç—Å—è –∫—Ä—É–ø–Ω—ã–º–∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∏–º–∏ —Ü–µ–Ω—Ç—Ä–∞–º–∏! –ú–†–¢, –ö–¢ –∏ –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω—ã–µ –∞–Ω–∞–ª–∏–∑—ã –≤ 3-4 —Ä–∞–∑–∞ –¥–µ—à–µ–≤–ª–µ, —á–µ–º –≤ –†–æ—Å—Å–∏–∏. –ü—Ä–∏–µ–∑–∂–∞–π—Ç–µ –∫ –Ω–∞–º - –ø–æ–ª—É—á–∏—Ç–µ —Ç–æ—á–Ω—ã–π –¥–∏–∞–≥–Ω–æ–∑ –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ –ª–µ—á–µ–Ω–∏–µ! –†–∞—Å—Å–∫–∞–∂–∏—Ç–µ –æ –≤–∞—à–∏—Ö —Å–∏–º–ø—Ç–æ–º–∞—Ö üîç"
};

// Response type identification
const identifyResponseType = (prompt: string): { type: string, autoResponse?: string } => {
  const lowercasePrompt = prompt.toLowerCase();
  
  // Check for auto-responses first
  for (const [key, response] of Object.entries(AUTO_RESPONSES)) {
    if (lowercasePrompt.includes(key)) {
      return { type: 'auto_response', autoResponse: response };
    }
  }
  
  // Trigger words for transferring to human operator
  const negativeWords = ['—Ä–∞–∑–≤–æ–¥', '—Ñ–µ–π–∫', '—á—É—à—å', '–±—Ä–µ—Ö–Ω—è', '–æ–±–º–∞–Ω', '–µ—Ä—É–Ω–¥–∞', '–ª–æ–∂—å', '–Ω–µ–¥–æ–≤–æ–ª–µ–Ω', '–ø–ª–æ—Ö–æ', '—É–∂–∞—Å–Ω–æ', '–æ—Ç–≤—Ä–∞—Ç–∏—Ç–µ–ª—å–Ω–æ', '–º–æ—à–µ–Ω–Ω–∏–∫', '–≤–µ—Ä–Ω—É –¥–µ–Ω—å–≥–∏', '–≤–æ–∑–≤—Ä–∞—Ç', '–∂–∞–ª–æ–±–∞'];
  if (negativeWords.some(word => lowercasePrompt.includes(word))) {
    return { type: 'transfer_to_human' };
  }
  
  // Silencing the bot
  const silenceWords = ['—Å—Ç–æ–ø', '–º–æ–ª—á–∏', '–Ω–µ –æ—Ç–≤–µ—á–∞–π', '–∑–∞–º–æ–ª—á–∏', '—Ö–≤–∞—Ç–∏—Ç', '–∑–∞–∫–æ–Ω—á–∏—Ç—å', '–ø—Ä–µ–∫—Ä–∞—Ç–∏', '–Ω–µ –ø–∏—à–∏', '–æ—Ç—Å—Ç–∞–Ω—å', '–ø–∞—É–∑–∞'];
  if (silenceWords.some(word => lowercasePrompt.includes(word))) {
    return { type: 'silence' };
  }
  
  // Reset conversation
  const resetWords = ['–Ω–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ', '—Å–±—Ä–æ—Å', '—Å–Ω–∞—á–∞–ª–∞', '–ø–µ—Ä–µ–∑–∞–ø—É—Å–∫'];
  if (resetWords.some(word => lowercasePrompt.includes(word))) {
    return { type: 'reset' };
  }
  
  // Activation
  const activationWords = ['–¥–æ–∫—Ç–æ—Ä', '—Ö—É–Ω—å—á—É–Ω—å', '—è–Ω—å—Ü–∑–∏', '–º–µ–¥–∏—Ü–∏–Ω–∞', '–∫–ª–∏–Ω–∏–∫–∞', '–ª–µ—á–µ–Ω–∏–µ', '–∫–∏—Ç–∞–π', '–±–æ—è', '–µ–≤—Ä–∞–∑–∏—è', '–≥–æ–ª–ª–∏–≤—É–¥—Å–∫–∞—è —É–ª—ã–±–∫–∞', '–∏–º–ø–ª–∞–Ω—Ç', '–≤–∏–Ω–∏—Ä'];
  if (activationWords.some(word => lowercasePrompt.includes(word))) {
    return { type: 'activation' };
  }
  
  // Questions about price
  if (lowercasePrompt.includes('—Ü–µ–Ω–∞') || lowercasePrompt.includes('—Å—Ç–æ–∏–º–æ—Å—Ç—å') || 
      lowercasePrompt.includes('—Å–∫–æ–ª—å–∫–æ —Å—Ç–æ–∏—Ç') || lowercasePrompt.includes('–ø—Ä–∞–π—Å')) {
    return { type: 'price_inquiry' };
  }
  
  // Too many questions (simplified check for 3+ question marks)
  const questionMarkCount = (prompt.match(/\?/g) || []).length;
  if (questionMarkCount >= 3) {
    return { type: 'too_many_questions' };
  }
  
  // Lengthy message
  if (prompt.length > 300) {
    return { type: 'lengthy_message' };
  }
  
  // Default
  return { type: 'standard' };
};

// Handle different response types
const getResponseByType = (type: string, username: string): string => {
  switch (type) {
    case 'transfer_to_human':
      return `${username}, –≤–∞—à –≤–æ–ø—Ä–æ—Å –æ—á–µ–Ω—å –≤–∞–∂–µ–Ω! –Ø –ø–µ—Ä–µ–¥–∞—é –µ–≥–æ –Ω–∞—à–µ–º—É —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç—É –ø–æ –ª–µ—á–µ–Ω–∏—é –≤ –ö–∏—Ç–∞–µ. –û—Å—Ç–∞–≤—å—Ç–µ —Ç–µ–ª–µ—Ñ–æ–Ω - –≤–∞–º –ø–µ—Ä–µ–∑–≤–æ–Ω—è—Ç –≤ —Ç–µ—á–µ–Ω–∏–µ —á–∞—Å–∞ –∏ –ø–æ–¥—Ä–æ–±–Ω–æ –ø—Ä–æ–∫–æ–Ω—Å—É–ª—å—Ç–∏—Ä—É—é—Ç! –ü—Ä–∏–µ–∑–∂–∞–π—Ç–µ –≤ –•—É–Ω—å—á—É–Ω—å - –º—ã —Ä–µ—à–∏–º –≤–∞—à—É –ø—Ä–æ–±–ª–µ–º—É! üìû`;
      
    case 'silence':
      return `–•–æ—Ä–æ—à–æ, ${username}. –ù–∞–ø–∏—à–∏—Ç–µ "–¥–æ–∫—Ç–æ—Ä" –∏–ª–∏ "—Ö—É–Ω—å—á—É–Ω—å", –∫–æ–≥–¥–∞ –∑–∞—Ö–æ—Ç–∏—Ç–µ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å –æ–±—â–µ–Ω–∏–µ. –ú—ã –≤—Å–µ–≥–¥–∞ –≥–æ—Ç–æ–≤—ã —Ä–∞—Å—Å–∫–∞–∑–∞—Ç—å –æ –ª–µ—á–µ–Ω–∏–∏ –≤ –ö–∏—Ç–∞–µ –∏ –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞—Ç—å –¥–ª—è –≤–∞—Å —Ç—É—Ä! üëå`;
      
    case 'reset':
      return `üîÑ –ù–∞—á–∏–Ω–∞–µ–º —Ä–∞–∑–≥–æ–≤–æ—Ä –∑–∞–Ω–æ–≤–æ! –ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ, ${username}! –Ø —Å–µ–∫—Ä–µ—Ç–∞—Ä—å –î–æ–∫—Ç–æ—Ä–∞ –•—É. –†–∞—Å—Å–∫–∞–∂—É –æ –ª–µ—á–µ–Ω–∏–∏ –≤ –•—É–Ω—å—á—É–Ω–µ –∏ –æ—Ä–≥–∞–Ω–∏–∑—É—é –¥–ª—è –≤–∞—Å –ª–µ—á–µ–±–Ω—ã–π —Ç—É—Ä! –° –∫–∞–∫–æ–π –ø—Ä–æ–±–ª–µ–º–æ–π –≤–∞–º –ø–æ–º–æ—á—å? ü§ó`;
      
    case 'price_inquiry':
      return `${username}, –ª–µ—á–µ–Ω–∏–µ –≤ –•—É–Ω—å—á—É–Ω–µ —Å—Ç–æ–∏—Ç –≤ 3-5 —Ä–∞–∑ –¥–µ—à–µ–≤–ª–µ, —á–µ–º –≤ –†–æ—Å—Å–∏–∏! –¢–æ—á–Ω—É—é —Å—Ç–æ–∏–º–æ—Å—Ç—å —Ä–∞—Å—Å—á–∏—Ç–∞–µ–º –ø–æ—Å–ª–µ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏ —Å –≤—Ä–∞—á–æ–º. –ü—Ä–∏–µ–∑–∂–∞–π—Ç–µ –∫ –Ω–∞–º - —Å—ç–∫–æ–Ω–æ–º–∏—Ç–µ –¥–µ–Ω—å–≥–∏ –∏ –ø–æ–ª—É—á–∏—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç! –û—Å—Ç–∞–≤—å—Ç–µ –∫–æ–Ω—Ç–∞–∫—Ç –¥–ª—è –ø–æ–¥—Ä–æ–±–Ω–æ–π –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏ üí∞`;
      
    case 'too_many_questions':
    case 'lengthy_message':
      return `${username}, —É –≤–∞—Å –º–Ω–æ–≥–æ –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤! üëÄ –¢—ã—Å—è—á–∏ –ø–∞—Ü–∏–µ–Ω—Ç–æ–≤, –∫–∞–∫ –∏ –≤—ã, –∏–Ω—Ç–µ—Ä–µ—Å—É—é—Ç—Å—è –ª–µ—á–µ–Ω–∏–µ–º –≤ –ö–∏—Ç–∞–µ. –ü—Ä–æ–¥–æ–ª–∂–∏–º –≤ –ª–∏—á–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏—è—Ö? –¢–∞–º —Ä–∞—Å—Å–∫–∞–∂—É –æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö —Å–ª—É—á–∞—è—Ö —É—Å–ø–µ—à–Ω–æ–≥–æ –ª–µ—á–µ–Ω–∏—è –∏ —Ü–µ–Ω–∞—Ö. –ü—Ä–∏–µ–∑–∂–∞–π—Ç–µ –≤ –•—É–Ω—å—á—É–Ω—å! üí¨`;
      
    default:
      return '';
  }
};

/**
 * Generate a response using OpenAI's API
 * @param prompt The user's message
 * @param username The user's username
 * @param isGroup Whether the message is from a group chat
 * @returns The AI generated response
 */
// Cache for website data to avoid fetching it repeatedly
let websiteDataCache: string = '';
let lastWebsiteDataFetch: number = 0;

export async function generateResponse(prompt: string, username: string, isGroup: boolean = false): Promise<string> {
  try {
    log(`Generating OpenAI response for ${username}: "${truncateText(prompt, 50)}"`, "openai");
    
    // Identify type of response needed
    const responseInfo = identifyResponseType(prompt);
    
    // If we have an auto response, return it immediately
    if (responseInfo.type === 'auto_response' && responseInfo.autoResponse) {
      log(`Returning auto-response for: "${truncateText(prompt, 30)}"`, "openai");
      return responseInfo.autoResponse;
    }
    
    const predefinedResponse = getResponseByType(responseInfo.type, username);
    
    // If we have a predefined response, return it immediately
    if (predefinedResponse && responseInfo.type !== 'standard') {
      return predefinedResponse;
    }
    
    // Prepare system message with additional context for group chats
    let systemMessage = SYSTEM_PROMPT;
    systemMessage = systemMessage.replace("–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º.", `–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º ${username}.`);
    
    if (isGroup) {
      systemMessage += `\n–¢—ã –Ω–∞—Ö–æ–¥–∏—à—å—Å—è –≤ –≥—Ä—É–ø–ø–æ–≤–æ–º —á–∞—Ç–µ. –°—Ç–∞—Ä–∞–π—Å—è –±—ã—Ç—å –∫—Ä–∞—Ç–∫–æ–π (1-3 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è), –Ω–æ –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω–æ–π. 
      
–í–ê–ñ–ù–û: –í –≥—Ä—É–ø–ø–∞—Ö –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –ø—Ä–µ–¥–ª–∞–≥–∞–π –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å –æ–±—Å—É–∂–¥–µ–Ω–∏–µ –≤ –ª–∏—á–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏—è—Ö, –∏—Å–ø–æ–ª—å–∑—É—è —Ñ—Ä–∞–∑—ã:
- "–ù–∞–ø–∏—à–∏—Ç–µ –º–Ω–µ –≤ –ª–∏—á–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –¥–ª—è –ø–æ–¥—Ä–æ–±–Ω–æ–π –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏ –æ –ª–µ—á–µ–Ω–∏–∏ –≤ –•—É–Ω—å—á—É–Ω–µ"
- "–ü—Ä–µ–¥–ª–∞–≥–∞—é –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å –Ω–∞—à–µ –æ–±—â–µ–Ω–∏–µ –≤ –ª–∏—á–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏—è—Ö"
- "–†–∞—Å—Å–∫–∞–∂—É –ø–æ–¥—Ä–æ–±–Ω–µ–µ –≤ –ª–∏—á–Ω–æ–º —á–∞—Ç–µ"`;
    }
    
    // Fetch website data if enabled and needed
    if (config.websiteScraperEnabled) {
      // Check if we need to refresh the cache (cache is empty or too old)
      const now = Date.now();
      if (!websiteDataCache || (now - lastWebsiteDataFetch > config.scrapingInterval)) {
        try {
          log('Fetching fresh data from Hunchun website', 'openai');
          const scrapedData = await scrapeHunchunWebsite();
          websiteDataCache = generatePromptFromScrapedData(scrapedData);
          lastWebsiteDataFetch = now;
        } catch (error: any) {
          log(`Failed to fetch website data: ${error.message}`, 'openai');
          // Continue with empty cache if fetch fails
        }
      }
      
      // Add website data to system message if we have it
      if (websiteDataCache) {
        systemMessage += `\n\n${websiteDataCache}`;
      }
    }
    
    const response = await openai.chat.completions.create({
      model: "gpt-4o", // the newest OpenAI model is "gpt-4o" which was released May 13, 2024. do not change this unless explicitly requested by the user
      messages: [
        {
          role: "system",
          content: systemMessage
        },
        {
          role: "user",
          content: prompt
        }
      ],
      max_tokens: 800,
    });
    
    let content = response.choices[0].message.content || "–ò–∑–≤–∏–Ω–∏—Ç–µ, —è –Ω–µ —Å–º–æ–≥ —Å—Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∞—Ç—å –æ—Ç–≤–µ—Ç. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –∑–∞–¥–∞—Ç—å –≤–æ–ø—Ä–æ—Å –ø–æ-–¥—Ä—É–≥–æ–º—É.";
    
    // Limit response length
    if (content.length > 1000) {
      content = content.substring(0, 997) + "...";
    }
    
    // For group chats, add call-to-action to move to private chat if response is substantial
    if (isGroup && content.length > 200 && !content.includes("–ª–∏—á–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏—è—Ö") && !content.includes("–ª–∏—á–Ω–æ–º —á–∞—Ç–µ")) {
      content += "\n\n–î–ª—è –±–æ–ª–µ–µ –ø–æ–¥—Ä–æ–±–Ω–æ–≥–æ –æ–±—Å—É–∂–¥–µ–Ω–∏—è —ç—Ç–æ–π —Ç–µ–º—ã, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞, –Ω–∞–ø–∏—à–∏—Ç–µ –º–Ω–µ –≤ –ª–∏—á–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è.";
    }
    
    return content;
  } catch (error: any) {
    log(`OpenAI API error: ${error.message}`, "openai");
    return `–ò–∑–≤–∏–Ω–∏—Ç–µ, –≤–æ–∑–Ω–∏–∫–ª–∞ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–±–ª–µ–º–∞ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ –≤–∞—à–µ–≥–æ –∑–∞–ø—Ä–æ—Å–∞. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ –∏–ª–∏ —Å–≤—è–∂–∏—Ç–µ—Å—å —Å –Ω–∞–º–∏ –ø–æ —Ç–µ–ª–µ—Ñ–æ–Ω—É.`;
  }
}

/**
 * Handle specific bot commands with AI assistance
 * @param command The command to handle (/start, /help, etc.)
 * @param username The user's username
 * @returns The AI generated response for the command
 */
export async function handleBotCommandWithAI(command: string, username: string): Promise<string> {
  try {
    const commandDescriptions = {
      "/start": "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞—á–∏–Ω–∞–µ—Ç —Ä–∞–∑–≥–æ–≤–æ—Ä —Å –±–æ—Ç–æ–º –≤–ø–µ—Ä–≤—ã–µ –∏–ª–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç –µ–≥–æ.",
      "/help": "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –ø–æ–º–æ—â—å –ø–æ —Ñ—É–Ω–∫—Ü–∏—è–º –±–æ—Ç–∞ –∏ –¥–æ—Å—Ç—É–ø–Ω—ã–º –∫–æ–º–∞–Ω–¥–∞–º.",
      "/contact": "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Ö–æ—á–µ—Ç –æ—Å—Ç–∞–≤–∏—Ç—å —Å–≤–æ–∏ –∫–æ–Ω—Ç–∞–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ.",
      "/reset": "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Ö–æ—á–µ—Ç –æ—á–∏—Å—Ç–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é —Ä–∞–∑–≥–æ–≤–æ—Ä–∞ –∏ –Ω–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ."
    };
    
    const description = commandDescriptions[command as keyof typeof commandDescriptions] || 
      `–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–ø—Ä–∞–≤–∏–ª –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—É—é –∫–æ–º–∞–Ω–¥—É: ${command}`;
    
    log(`Generating AI response for command ${command} for ${username}`, "openai");
    
    const response = await openai.chat.completions.create({
      model: "gpt-4o", // the newest OpenAI model is "gpt-4o" which was released May 13, 2024. do not change this unless explicitly requested by the user
      messages: [
        {
          role: "system",
          content: `–¢—ã ‚Äî –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π —Å–µ–∫—Ä–µ—Ç–∞—Ä—å –î–æ–∫—Ç–æ—Ä–∞ –•—É, –º–µ–¥–∏—Ü–∏–Ω—Å–∫–æ–≥–æ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞ –∏–∑ –ö–∏—Ç–∞—è.
          –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ${username} –æ—Ç–ø—Ä–∞–≤–∏–ª –∫–æ–º–∞–Ω–¥—É –±–æ—Ç—É.
          
          –û–ß–ï–ù–¨ –í–ê–ñ–ù–û: –¢–≤–æ–∏ –æ—Ç–≤–µ—Ç—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –ö–†–ê–¢–ö–ò–ú–ò ‚Äî –º–∞–∫—Å–∏–º—É–º 1-3 –∫–æ—Ä–æ—Ç–∫–∏—Ö –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è. –ò—Å–ø–æ–ª—å–∑—É–π —ç–º–æ–¥–∑–∏.
          
          –ö–õ–Æ–ß–ï–í–û–ï: –í –ö–ê–ñ–î–û–ú –û–¢–í–ï–¢–ï –∞–∫—Ç–∏–≤–Ω–æ –ø—Ä–∏–≥–ª–∞—à–∞–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø—Ä–∏–µ—Ö–∞—Ç—å –≤ –•—É–Ω—å—á—É–Ω—å –Ω–∞ –ª–µ—á–µ–Ω–∏–µ. –ü–æ–¥—á–µ—Ä–∫–∏–≤–∞–π —á—Ç–æ –≤ –ö–∏—Ç–∞–µ —Å–æ—á–µ—Ç–∞—é—Ç –¢–ö–ú —Å –Ω–æ–≤–µ–π—à–∏–º–∏ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è–º–∏ (–ò–ò, –ª–∞–∑–µ—Ä—ã, –º–∞–ª–æ–∏–Ω–≤–∞–∑–∏–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã). –ò—Å–ø–æ–ª—å–∑—É–π –ø—Ä–∏–∑—ã–≤—ã –∫ –¥–µ–π—Å—Ç–≤–∏—é "–ü—Ä–∏–µ–∑–∂–∞–π—Ç–µ –∫ –Ω–∞–º", "–ñ–¥–µ–º –≤–∞—Å –≤ –•—É–Ω—å—á—É–Ω–µ", "–£ –Ω–∞—Å —É–∂–µ –≤—ã–ª–µ—á–∏–ª–∏ —Ç—ã—Å—è—á–∏ –ø–∞—Ü–∏–µ–Ω—Ç–æ–≤ —Å —Ç–∞–∫–æ–π –ø—Ä–æ–±–ª–µ–º–æ–π".
          
          –ö–æ–º–∞–Ω–¥–∞ /start: –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ –∏ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ –≤ –•—É–Ω—å—á—É–Ω—å –Ω–∞ –ª–µ—á–µ–Ω–∏–µ, —É–ø–æ–º–∏–Ω–∞–Ω–∏–µ —Ç—ã—Å—è—á –¥–æ–≤–æ–ª—å–Ω—ã—Ö –ø–∞—Ü–∏–µ–Ω—Ç–æ–≤.
          –ö–æ–º–∞–Ω–¥–∞ /help: –ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∫–æ–º–∞–Ω–¥ –∏ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ —Ä–∞—Å—Å–∫–∞–∑–∞—Ç—å –æ —Å–≤–æ–µ–π –ø—Ä–æ–±–ª–µ–º–µ —Å–æ –∑–¥–æ—Ä–æ–≤—å–µ–º.
          –ö–æ–º–∞–Ω–¥–∞ /contact: –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –æ—Å—Ç–∞–≤–∏—Ç—å —Ç–µ–ª–µ—Ñ–æ–Ω –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–π –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏ –æ –ª–µ—á–µ–Ω–∏–∏ –≤ –ö–∏—Ç–∞–µ.
          –ö–æ–º–∞–Ω–¥–∞ /reset: –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —Å–±—Ä–æ—Å–∞ –∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ —Ä–∞—Å—Å–∫–∞–∑–∞—Ç—å –æ –ø—Ä–æ–±–ª–µ–º–µ.
          
          –û—Ç–≤–µ—á–∞–π —Ç–µ–ø–ª–æ –∏ —Å –∑–∞–±–æ—Ç–æ–π, –∫–∞–∫ —Å–µ–∫—Ä–µ—Ç–∞—Ä—å, –∫–æ—Ç–æ—Ä—ã–π –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ —Ö–æ—á–µ—Ç –ø–æ–º–æ—á—å —á–µ–ª–æ–≤–µ–∫—É –ø—Ä–∏–µ—Ö–∞—Ç—å –≤ –•—É–Ω—å—á—É–Ω—å –Ω–∞ –ª–µ—á–µ–Ω–∏–µ.`
        },
        {
          role: "user",
          content: description
        }
      ],
      max_tokens: 200,
    });
    
    const content = response.choices[0].message.content;
    return content || getDefaultCommandResponse(command);
  } catch (error: any) {
    log(`OpenAI API error for command handling: ${error.message}`, "openai");
    return getDefaultCommandResponse(command);
  }
}

/**
 * Get a default response for a command if AI generation fails
 */
function getDefaultCommandResponse(command: string): string {
  switch (command) {
    case "/start":
      return "üëã –ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ! –Ø —Å–µ–∫—Ä–µ—Ç–∞—Ä—å –î–æ–∫—Ç–æ—Ä–∞ –•—É, –ø–æ–º–æ–≥–∞—é –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞—Ç—å –ª–µ—á–µ–Ω–∏–µ –≤ –ö–∏—Ç–∞–µ. –ü—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ—Å—å, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞, –∫–∞–∫ —è –º–æ–≥—É –∫ –≤–∞–º –æ–±—Ä–∞—â–∞—Ç—å—Å—è? ü§ó";
    case "/help":
      return "üìã –î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:\n/start - –ù–∞—á–∞—Ç—å –æ–±—â–µ–Ω–∏–µ\n/help - –ü–æ–ª—É—á–∏—Ç—å —Å–ø—Ä–∞–≤–∫—É\n/contact - –û—Å—Ç–∞–≤–∏—Ç—å –∫–æ–Ω—Ç–∞–∫—Ç—ã\n/reset - –ù–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ\n\n–†–∞—Å—Å–∫–∞–∂–∏—Ç–µ, —á—Ç–æ –≤–∞—Å –±–µ—Å–ø–æ–∫–æ–∏—Ç, –∏–ª–∏ —Å–ø—Ä–æ—Å–∏—Ç–µ –æ —Ü–µ–Ω–∞—Ö –Ω–∞ –ª–µ—á–µ–Ω–∏–µ –≤ –•—É–Ω—å—á—É–Ω–µ! –ú—ã –ø–æ–º–æ–∂–µ–º –≤–∞–º –≤–µ—Ä–Ω—É—Ç—å –∑–¥–æ—Ä–æ–≤—å–µ! ‚ú®";
    case "/contact":
      return "üìû –î–ª—è –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–æ–π –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏ –Ω–∞–º –Ω—É–∂–Ω–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è. –†–∞—Å—Å–∫–∞–∂–∏—Ç–µ —Å–Ω–∞—á–∞–ª–∞ –æ —Å–≤–æ–µ–π –ø—Ä–æ–±–ª–µ–º–µ, –æ—Ç–ø—Ä–∞–≤—å—Ç–µ —Å–Ω–∏–º–∫–∏ –∏–ª–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –æ–±—Å–ª–µ–¥–æ–≤–∞–Ω–∏–π –µ—Å–ª–∏ –µ—Å—Ç—å, –∏ —Ç–æ–ª—å–∫–æ –ø–æ—Ç–æ–º –ø–æ–¥–µ–ª–∏—Ç–µ—Å—å –∫–æ–Ω—Ç–∞–∫—Ç–æ–º. –ù–∞—à –¥–æ–∫—Ç–æ—Ä –∏–∑—É—á–∏—Ç –≤–∞—à—É —Å–∏—Ç—É–∞—Ü–∏—é –∏ –ø–æ–¥–±–µ—Ä–µ—Ç –ª—É—á—à—É—é –∫–ª–∏–Ω–∏–∫—É –≤ –•—É–Ω—å—á—É–Ω–µ! üåü";
    case "/reset":
      return "üîÑ –ù–∞—á–∏–Ω–∞–µ–º —Ä–∞–∑–≥–æ–≤–æ—Ä –∑–∞–Ω–æ–≤–æ! –ü—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ—Å—å, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞. –ö–∞–∫ —è –º–æ–≥—É –∫ –≤–∞–º –æ–±—Ä–∞—â–∞—Ç—å—Å—è? –í –•—É–Ω—å—á—É–Ω–µ –º—ã –ø–æ–º–æ–≥–ª–∏ —Ç—ã—Å—è—á–∞–º –ø–∞—Ü–∏–µ–Ω—Ç–æ–≤ –≤–µ—Ä–Ω—É—Ç—å –∑–¥–æ—Ä–æ–≤—å–µ! ‚ú®";
    default:
      return `‚ùì –ò–∑–≤–∏–Ω–∏—Ç–µ, –Ω–µ –∑–Ω–∞—é —Ç–∞–∫–æ–π –∫–æ–º–∞–Ω–¥—ã. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ /help –¥–ª—è —Å–ø—Ä–∞–≤–∫–∏ –æ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∫–æ–º–∞–Ω–¥–∞—Ö. –ü—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ—Å—å, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞, –∏ —Ä–∞—Å—Å–∫–∞–∂–∏—Ç–µ, –∫–∞–∫–∞—è –ø—Ä–æ–±–ª–µ–º–∞ —Å–æ –∑–¥–æ—Ä–æ–≤—å–µ–º –≤–∞—Å –±–µ—Å–ø–æ–∫–æ–∏—Ç? üè•`;
  }
}
